# demo of how nested rewrite/then chains behave
anyOf:
  - match: ".+"
  - rewrite: "foo"
    then:
      type: file
      rewrite: "\\1bar"
      then:
        # demo of  how "then" can be used to augment the
        # effective constraint evaluation order.
        # notice that "anyOf" is usually checked after "validMeta"
        anyOf:
          - type: dir
        then:
          validMeta:
            "$ref": text.schema.json
          rewrite: "\\1/qux"
          then:
            type: file
